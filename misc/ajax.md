# Ajaxとは

* ブラウザと Web サーバ間で行う HTTP通信とは独立して、非同期に（= 並行して） HTTP通信を行う技術のこと

### （参考）Wikipedia の説明

「Ajax（エイジャックス、アジャックス、アヤックス）は、ウェブブラウザ内で非同期通信とインターフェイスの構築などを行う技術の総称。
XMLHttpRequest（HTTP通信を行うためのJavaScript組み込みクラス）による非同期通信を利用し、
通信結果に応じてダイナミックHTMLで動的にページの一部を書き換えるというアプローチを取る」

## 特徴

ユーザに「レスポンスが良い／インタラクティブな Web サービス」と感じさせることができる。

* 表示内容の更新のたびにいちいち画面遷移しなくてよくなる
* ユーザが更新ボタンを押さなくても表示内容が自動的に更新される
* 内容に更新のあったところだけ処理することもできるので、Webサイトのパフォーマンスが良くなる

## 応用例

リアルタイム性が要求されるアプリや、インタラクティブな Web アプリ／Webサービスで重宝される。

* 更新ボタンを押さなくても新しいツイートが更新される(Twitter)
* 更新ボタンを押さなくても新規メールが届くとメールボックスが更新される(Gmail)
* 検索する単語の予測 - ユーザがタイプするたびに予測結果が更新される(Google検索) ※ 参考: リアクティブプログラミング

## 1dayインターンアプリにおける例

今回の1dayインターンで作成するサンプルアプリケーションでは、
ユーザの端末からは、次の2種類のリクエストを発行しなければなりません。

* 今回サンプルアプリケーションが置かれているサーバ（以降 sample.app）に対する HTTPリクエスト
* Flicker API に対する HTTP リクエスト

### 従来型（= Ajax 登場以前の）のアプリケーションの場合

これを従来型（= Ajax 登場以前の）のサーバ-クライアントアプリケーションで実現しようとすると、
以下の様な手順を経る必要があります。

1. ユーザの端末から、sample.app へHTTPリクエストを送信する
2. sample.app は、ユーザからのリクエストを受け取り、Flicker API に HTTPリクエストを送信する
3. Flicker API は sample.app HTTP リスポンスを返す
4. sample.app は、Flicker API から帰ってきた HTTP リスポンスを処理し、ユーザの端末に HTTPリスポンスを返す
5. ユーザの端末は最終処理結果を sample.app からうけとり、ブラウザの画面に内容を表示する

ユーザは、1〜5のすべての処理が終わるまで、処理結果を見ることはできません。
その間、ブラウザの画面はずっと処理中のままなので、ユーザは「なかなか結果が帰ってこない」
とイライラします。

### Ajax を使った場合

これに対し、Ajax を使用すると、以下のような手順になります。

1. ユーザの端末から、sample.app へHTTPリクエストを送信する
2. sample.app は、ユーザからの HTTPリクエストを受け取り、Ajaxのコードを含む javascript コードを
リスポンスとしてユーザに返す
3. ユーザの端末は、ブラウザ上で Ajax のコードを含む、javascript コードを実行する。その処理の過程で、
Flicker API に HTTP リクエストを送信し、返却された HTTP リクエストを javascript のコード上で
処理する。処理が終わり次第、結果をブラウザ上に表示する

Ajax を利用すると、サーバ内では Flicker API との処理を行わず、
ユーザに「Flicker API と通信してください」という処理内容を javascript のコードとして返します。

したがって、Flicker API との通信が完了していなくても、
ユーザはブラウザ上に「とりあえずの結果」を見ることができます。

Flicker API との通信(= Ajax 通信)はレンダリングと平行して行われます。

Flicker API との Ajax 通信が終わり次第、処理結果がブラウザ上に反映されます。

このようにして、処理が終わったものから結果を見ることができるので、
ユーザは「なかなか結果が帰ってこない」イライラから解消されます。
